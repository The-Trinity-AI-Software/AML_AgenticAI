
<!DOCTYPE html>
<html>
<head>
    <title>AML Fraud Detection - Flask + LangGraph</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 40px;
            background-color: #f9f9f9;
            color: #2c3e50;
        }
        h1, h2 {
            color: #1a5276;
        }
        .info-section {
            background-color: #eaf2f8;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }
        .info-section p {
            line-height: 1.7;
        }
        .upload-section {
            margin-bottom: 30px;
            background-color: #ffffff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.08);
        }
        .form-group {
            margin-bottom: 15px;
        }
        .table-container {
            max-height: 500px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 10px;
            background-color: white;
            border-radius: 8px;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        .table th, .table td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        .table th {
            background-color: #d6eaf8;
            position: sticky;
            top: 0;
        }
        .btn {
            padding: 10px 20px;
            background-color: #2e86c1;
            color: white;
            text-decoration: none;
            border: none;
            border-radius: 5px;
            margin-right: 10px;
            cursor: pointer;
            font-weight: bold;
        }
        .btn:hover {
            background-color: #1b4f72;
        }
        .btn-secondary {
            background-color: #48c9b0;
        }
        .btn-secondary:hover {
            background-color: #117a65;
        }
    </style>
</head>
<body>
    <h1>üõ°Ô∏è AML Fraud Detection System (Agentic AI + LangGraph)</h1>

    <div class="info-section">
        <h2>üí° What is Anti Money Laundering (AML)?</h2>
        <p>
            Anti Money Laundering (AML) refers to laws, regulations, and technologies that financial institutions use to detect and prevent illicit money flows. This includes identifying unusual patterns in transactions, especially those involving large transfers, foreign accounts, or high-risk geographies.
        </p>
        <p>
            This project leverages an <strong>Agentic AI framework</strong> using <strong>LangGraph</strong> to build an explainable fraud detection pipeline. Each transaction passes through a multi-node LangGraph workflow combining:
            <ul>
                <li>‚úÖ Rule-based checks for known red flags</li>
                <li>‚úÖ ML-based fraud scoring using XGBoost, Random Forest, and Logistic Regression</li>
                <li>‚úÖ Explanation generation based on both rules and model reasoning</li>
            </ul>
        </p>
    </div>

    <div class="upload-section">
        <form action="/predict" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <strong>Step 1:</strong> Upload Training File (from <code>uploads/Train/</code>):<br>
                <input type="file" name="train_file" required>
            </div>

            <div class="form-group">
                <strong>Step 2:</strong> Upload Test File (from <code>uploads/Test/</code>):<br>
                <input type="file" name="test_file" required>
            </div>

            <input class="btn" type="submit" value="üöÄ Run Prediction">
        </form>
    </div>

    {% if show_results %}
        <h2>üìä Top 15 Prediction Results</h2>
        <div class="table-container">
            {{ table|safe }}
        </div>
        <br/>
        <a class="btn btn-secondary" href="/download/excel">‚¨áÔ∏è Download Excel</a>
        <a class="btn btn-secondary" href="/download/json">‚¨áÔ∏è Download JSON</a>
    {% endif %}
</body>
</html>
